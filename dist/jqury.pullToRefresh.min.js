!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):"object"==typeof exports?exports["jqury.pullToRefresh"]=t():e["jqury.pullToRefresh"]=t()}(this,function(){return function(e){function t(i){if(n[i])return n[i].exports;var s=n[i]={exports:{},id:i,loaded:!1};return e[i].call(s.exports,s,s.exports,t),s.loaded=!0,s.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){!function(e){e.pullToRefresh=function(t,n){var i,s,o,r=!!("ontouchstart"in window),l={pluginName:"pullToRefresh",version:"0.0.1",distance:80,clazz:"",msg:{pullText:"下拉刷新...",releaseText:"松开刷新   ",loadingText:"正在加载..."},template:'<div class="m-pullToRefresh {clazz}" style="height: 0px;overflow: hidden;"><div class="message"><i></i><span>{text}</span></div></div>',callback:e.noop},a=this,c=e(document),u=e(t),p=!1,f=!1;a.settings={},a.init=function(){if(!r)throw"Browser is not support this plugin!";a.settings=e.extend({},l,n),a.initNode()},a.initNode=function(){var e=a.settings,t=e.template.replace("{clazz}",e.clazz).replace("{text}",e.msg.pullText);u.prepend(t),s=u.find(".m-pullToRefresh i"),o=u.find(".m-pullToRefresh span"),i=u.find(".m-pullToRefresh"),u.on("touchstart",h.bind(this)).on("touchmove",d.bind(this)).on("touchend",g.bind(this))},a.reset=function(){i.css({height:0}),f=!1};var h=function(e){a.startPageY=e.originalEvent.touches[0].pageY,a.startScrollTop=u.scrollTop()},d=function(e){var t=a.settings,n=e.originalEvent.touches[0].pageY,s=n-a.startPageY;if(f&&e.preventDefault(),u.scrollTop()<=0&&s>0&&!f){if(c.scrollTop()>0)return;e.preventDefault(),x(i,0),s>t.distance?(s=t.distance+(s-t.distance)/(.015*s),p=!0,o.text(t.msg.releaseText)):(o.text(t.msg.pullText),p=!1),i.css({height:s})}},g=function(e){var t=a.settings;x(i,350),p&&!f?(i.css({height:.6*t.distance}),o.text(t.msg.loadingText),f=!0,t.callback()):f||i.css({height:0}),p=!1},x=function(e,t){e.css({"-webkit-transition":"height "+t+"ms",transition:"height "+t+"ms"})};a.init()},e.fn.pullToRefresh=function(t){return this.each(function(){if(void 0==e(this).data("pullToRefresh")){var n=new e.pullToRefresh(this,t);e(this).data("pullToRefresh",n)}})}}(window.jQuery||window.Zepto)}])});