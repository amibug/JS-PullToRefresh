!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):"object"==typeof exports?exports["jqury.pullToRefresh"]=t():e["jqury.pullToRefresh"]=t()}(this,function(){return function(e){function t(i){if(n[i])return n[i].exports;var o=n[i]={exports:{},id:i,loaded:!1};return e[i].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){!function(e){e.pullToRefresh=function(t,n){var i,o,s,l=!!("ontouchstart"in window),r={pluginName:"pullToRefresh",version:"0.0.1",distance:80,clazz:"",msg:{pullText:"下拉刷新...",releaseText:"松开刷新   ",loadingText:"正在加载..."},locked:!1,template:'<div class="m-pullToRefresh {clazz}" style="height: 0px;overflow: hidden;"><div class="message"><i></i><span>{text}</span></div></div>',callback:e.noop},c=this,a=e(document),u=e(t),p=!1,f=!1;c.settings={},c.init=function(){if(!l)throw"Browser is not support this plugin!";c.settings=e.extend({},r,n),c.initNode()},c.initNode=function(){var e=c.settings,t=e.template.replace("{clazz}",e.clazz).replace("{text}",e.msg.pullText);u.prepend(t),o=u.find(".m-pullToRefresh i"),s=u.find(".m-pullToRefresh span"),i=u.find(".m-pullToRefresh"),u.on("touchstart",d.bind(this)).on("touchmove",h.bind(this)).on("touchend",g.bind(this))},c.reset=function(){i.css({height:0}),f=!1,this.setLocked(!1)},c.setLocked=function(e){var t=c.settings;t.locked=!!e};var d=function(e){c.startPageY=e.originalEvent.touches[0].pageY,c.startScrollTop=u.scrollTop()},h=function(e){var t=c.settings,n=e.originalEvent.touches[0].pageY,o=n-c.startPageY;if(f&&e.preventDefault(),u.scrollTop()<=0&&o>0&&!f&&!t.locked){if(a.scrollTop()>0)return;e.preventDefault(),x(i,0),o>t.distance?(o=t.distance+(o-t.distance)/(.015*o),p=!0,s.text(t.msg.releaseText)):(s.text(t.msg.pullText),p=!1),i.css({height:o})}},g=function(e){var t=c.settings;x(i,350),p&&!f?(i.css({height:.6*t.distance}),s.text(t.msg.loadingText),f=!0,t.callback()):f||i.css({height:0}),p=!1},x=function(e,t){e.css({"-webkit-transition":"height "+t+"ms",transition:"height "+t+"ms"})};c.init()},e.fn.pullToRefresh=function(t){return this.each(function(){if(void 0==e(this).data("pullToRefresh")){var n=new e.pullToRefresh(this,t);e(this).data("pullToRefresh",n)}})}}(window.jQuery||window.Zepto)}])});